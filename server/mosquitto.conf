# Mosquitto MQTT Broker Configuration
# For PQC OTA Server
# Compatible with Mosquitto 2.0.18

# ==================== General Settings ====================

# PID file
pid_file /run/mosquitto/mosquitto.pid

# User and group
# user mosquitto

# ==================== Listeners ====================

# MQTT Port (non-TLS)
listener 1883
protocol mqtt
allow_anonymous true

# MQTT over TLS Port
# listener 8883
# protocol mqtt
# cafile /etc/mosquitto/certs/ca.crt
# certfile /etc/mosquitto/certs/server.crt
# keyfile /etc/mosquitto/certs/server.key

# WebSocket Port (optional)
# listener 9001
# protocol websockets

# ==================== Persistence ====================

# Enable message persistence
persistence true
persistence_location /var/lib/mosquitto/

# Auto-save interval (seconds)
autosave_interval 300

# ==================== Logging ====================

# Log types: error, warning, notice, information, subscribe, unsubscribe, websockets, none, all
log_type error
log_type warning
log_type notice
log_type information

# Log destination
log_dest file /var/log/mosquitto/mosquitto.log
log_dest stdout

# Log timestamps
log_timestamp true
log_timestamp_format %Y-%m-%dT%H:%M:%S

# ==================== Security ====================

# Allow anonymous (for testing)
# Set to false in production
allow_anonymous true

# Password file (uncomment for authentication)
# password_file /etc/mosquitto/passwd

# ACL file (uncomment for access control)
# acl_file /etc/mosquitto/acl.conf

# ==================== Connection Limits ====================

# Maximum number of concurrent clients
max_connections -1

# ==================== Message Limits ====================

# Maximum QoS
# max_qos 2

# Maximum queued messages per client
max_queued_messages 1000

# Queue QoS 0 messages
queue_qos0_messages false

# Maximum packet size (bytes)
# message_size_limit 0

# ==================== Keep Alive ====================

# Maximum keepalive value (seconds)
# max_keepalive 65535

# ==================== Comments ====================

# This is a basic configuration for development.
# For production:
# 1. Set allow_anonymous false
# 2. Enable password_file and acl_file
# 3. Enable TLS on listener 8883
# 4. Configure proper certificates
